\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[left=5mm, right=5mm, bottom=5mm, top=5mm]{geometry}
\usepackage{lastpage}
\usepackage[explicit]{titlesec}
\usepackage{ulem}
\usepackage{bm}

\usepackage{titling}
\usepackage{calc}
\usepackage{fancyhdr}
\usepackage{xcolor}
\usepackage{enumitem}
\setlist{nolistsep, leftmargin = 4mm}

\usepackage{multicol}
\usepackage{adjustbox}
\usepackage{multirow}

\usepackage{textcomp}
\usepackage{amsmath}
\usepackage{esint}
\usepackage{amssymb}    % \cdots
\usepackage{cancel}     % strike-through terms
\usepackage{gensymb}
\usepackage{siunitx}
\sisetup{exponent-product = \cdot, per-mode = fraction, range-phrase = \dots}

\usepackage{tikz}
\usepackage{pgfplots}
\usetikzlibrary{positioning, calc, fit, matrix, decorations, angles, quotes, babel, 3d, arrows.meta, shadings, circuits.logic.IEC, circuits.ee.IEC, automata}
\usepackage{circuitikz}
\ctikzset{tripoles/pmos style/emptycircle}
\usepackage{wrapfig}

% pgfplot layers
\pgfplotsset{compat=1.7}                                                                % Version? f√ºr Plots  
\pgfdeclarelayer{bg}
\pgfdeclarelayer{l1}
\pgfdeclarelayer{l2}
\pgfdeclarelayer{l3}
\pgfdeclarelayer{tl1}
\pgfdeclarelayer{tl2}
\pgfdeclarelayer{tl3}
\pgfsetlayers{bg,l3,l2,l1,main,tl1,tl2,tl3}

% custom colors
\definecolor{darkgreen}{HTML}{008E00}
\definecolor{darkred}{HTML}{990000}
\definecolor{mred}{HTML}{e60000}
\definecolor{burntorange}{HTML}{ff9a00}
\definecolor{darkblue}{HTML}{000099}
\definecolor{lightblue}{HTML}{99d6ff}
\definecolor{lightgray}{HTML}{A9A9A9}
\definecolor{darkyellow}{HTML}{FED600}
\definecolor{limegreen}{HTML}{3ae32b}
\definecolor{pastelmoss}{HTML}{A0C1B8}
\definecolor{pastelaqua}{HTML}{709FB0}
\definecolor{pastelviolet}{HTML}{726a95}

\definecolor{primaryheader}{HTML}{30475e}
\definecolor{secondaryheader}{HTML}{f1935c}
\definecolor{thirdheader}{HTML}{ba6b57}

\tikzset{
    circ/.style = {circle, fill = black, minimum size=1mm, inner sep=0pt, outer sep=0pt},
    point/.style = {circle, draw = black, thick, minimum size=1mm, inner sep=0pt, outer sep=0pt},
    gnd/.style = {draw, fill, minimum width = 10mm, minimum height = 1pt},
    kvbinhead/.style = {draw = white, fill = burntorange!20, text = black}
}

\renewcommand{\title}[1]{\newcommand{\themaintitle}{#1}}

\newcommand{\uunits}[2]{$\left[#1\right] = \si{#2}$}
\newcommand{\floor}[1]{\text{floor}\left(#1\right)}

\newcommand{\cemph}[2][red]{\textcolor{#1}{\sffamily\bfseries\boldmath #2}}
\newcommand{\twocom}{$2^{\text{er}}$}
\newcommand{\nibp}[2]{#1\textcolor{blue}{#2}}

\DeclareTextFontCommand{\emph}{\bfseries\boldmath}

\newcommand{\createtitlepagestyle}{
    \fancypagestyle{TitlePageStyle}{
        \thispagestyle{empty}
    }
}

\newcommand{\createmainpagestyle}{
    \fancypagestyle{main}{
        \fancyhf{}
        \rfoot{Seite \thepage \protect{ }von \pageref{LastPage}}
        \renewcommand{\headrulewidth}{0pt}
        \renewcommand{\footrulewidth}{0pt}
    }
}

\newcommand{\overrideplainstyle}{
    \fancypagestyle{plain}{
        \fancyhf{}
        \rfoot{Seite \thepage \protect{ }von \pageref{LastPage}}
        \renewcommand{\headrulewidth}{0pt}
        \renewcommand{\footrulewidth}{0pt}
    }
}

\renewcommand{\maketitle}{
    \begin{center}
        \sffamily
        \LARGE
        \textbf{\themaintitle}\\
        \large
        \vspace{5mm}
        \theauthor\\
        ascheuer@student.ethz.ch\\
        \today
    \end{center}
}

\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{black!20!white}}

\newcommand{\raisedrulefill}[2][0ex]{\leaders\hbox{\rule[#1]{1pt}{#2}}\hfill}

\titleformat{\section}{\sffamily\bfseries\boldmath\large}{}{0pt}{\colorbox{primaryheader}{\parbox[c][3mm]{\linewidth - 6pt}{\textcolor{white}{#1}}}}
\titleformat{\subsection}{\sffamily\bfseries\boldmath}{}{0pt}{\colorbox{secondaryheader}{\parbox[c][2mm]{\linewidth - 6pt}{#1}}}
\titleformat{\subsubsection}{\sffamily\bfseries\boldmath}{}{0pt}{\textcolor{thirdheader}{#1 \raisedrulefill[0.4ex]{0.5pt}}}
\titleformat{\paragraph}[runin]{\sffamily\bfseries\boldmath}{}{0pt}{\uline{#1}}